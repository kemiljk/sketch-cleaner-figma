const eventListeners = [];
/**
 * Send an event to the UI
 * @param {string} action Name of the event
 * @param {any} data Data to send to the UI
 */

export const dispatchEvent = (action, data) => {
  figma.ui.postMessage({
    action,
    data
  });
};
/**
 * Handle an event from the UI
 * @param {string} action Name of the event 
 * @param {Function} callback Function to run on event
 */

export const handleEvent = (action, callback) => {
  eventListeners.push({
    action,
    callback
  });
};

figma.ui.onmessage = message => {
  for (let eventListener of eventListeners) {
    if (message.action === eventListener.action) eventListener.callback(message.data);
  }
};